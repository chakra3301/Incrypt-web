(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1370:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115);function n(){let[e,t]=(0,r.useState)("encode"),[n,l]=(0,r.useState)(0),[i,c]=(0,r.useState)(),[d,o]=(0,r.useState)(),[x,m]=(0,r.useState)(""),[h,g]=(0,r.useState)("file"),[p,b]=(0,r.useState)(),[u,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(5),[v,w]=(0,r.useState)(0),[N,C]=(0,r.useState)(!0),[S,k]=(0,r.useState)(!0),F=(0,r.useRef)(null),[L,R]=(0,r.useState)(25e3),[U,T]=(0,r.useState)(""),[E,M]=(0,r.useState)(!1),[P,z]=(0,r.useState)(!1),[O,D]=(0,r.useState)(!1),[B,G]=(0,r.useState)("");(0,r.useEffect)(()=>{R(function(){let e=document.createElement("canvas").getContext("2d"),t=4096;try{for(;t<=32768;)e.canvas.width=e.canvas.height=t,e.getImageData(0,0,1,1),t+=1024}catch(e){}return t-1024}())},[]),(0,r.useEffect)(()=>{if(p){let e=new Image;return e.onload=()=>{w(A(e.width,e.height,y))},e.src=URL.createObjectURL(p),()=>URL.revokeObjectURL(e.src)}w(0)},[p,y]);let A=(e,t,a)=>e*t*3*a>>3,_=e=>{f(!0),l(0),T("");let t=URL.createObjectURL(e),s=new Worker(a.tu(new URL(a.p+a.u(364),a.b)),{type:void 0});s.onmessage=async e=>{let{data:t}=e;if(void 0!==t.pct&&l(t.pct),t.done){var a;c(URL.createObjectURL(t.blob)),l(1),f(!1),window.decodeResult={suggestedName:t.suggestedName,fileSize:t.fileSize,detectedType:t.detectedType},t.blob&&((null==(a=t.detectedType)?void 0:a.toLowerCase().includes("text"))||"text/plain"===t.blob.type)&&T(await t.blob.text())}t.error&&(alert(t.error),f(!1))},s.postMessage({type:"decode",imageURL:t,bits:y,maxCanvas:L})},I=()=>{i&&URL.revokeObjectURL(i),c(void 0),l(0),o(void 0),m(""),b(void 0),z(!1),D(!1),G("")},H=async()=>{if(i){M(!0);try{let e=await fetch(i),t=await e.blob(),a=new FileReader;a.onload=async()=>{let e=a.result,t=B.trim()||"Encoded steganography image created with Incrypt - ".concat("text"===h?"Text message":"File data"," encoded with ").concat(y," bits per channel"),s=await fetch("https://www.incrypt.net/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e,description:t})});if(s.ok){let e=await s.json();console.log("Posted successfully:",e),z(!0),D(!1)}else throw Error("Failed to post to feed")},a.readAsDataURL(t)}catch(e){console.error("Error posting:",e),alert("Failed to share to feed. Please try again.")}finally{M(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"header",children:[(0,s.jsx)("img",{src:"/assets/dotlock.png",alt:"Logo",className:"header-logo"}),(0,s.jsx)("nav",{className:"header-nav",children:(0,s.jsx)("a",{href:"https://www.incrypt.net/",className:"nav-button",children:"Home"})})]}),(0,s.jsx)("canvas",{id:"matrixCanvas"}),(0,s.jsxs)("main",{className:"container",style:{marginTop:"90px"},children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"GPT‑1 Stego PNG Maker"}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center mb-6",children:[(0,s.jsx)("button",{onClick:()=>{t("encode"),I()},className:"px-4 py-2 rounded ".concat("encode"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Encode Data → PNG"}),(0,s.jsx)("button",{onClick:()=>{t("decode"),I()},className:"px-4 py-2 rounded ".concat("decode"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Decode PNG → Data"})]}),"encode"===e&&!i&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select cover image (optional):"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>e.target.files&&b(e.target.files[0]),className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"If no image provided, random pointillist art will be generated"})]}),p&&(0,s.jsxs)("div",{className:"bg-purple-900/20 p-4 rounded border border-purple-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Cover image: ",p.name]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Capacity: ",(v/1024/1024).toFixed(2)," MB with ",y," bits/channel"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,s.jsx)("button",{type:"button",className:"px-3 py-1 rounded ".concat("file"===h?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>g("file"),children:"File"}),(0,s.jsx)("button",{type:"button",className:"px-3 py-1 rounded ".concat("text"===h?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>g("text"),children:"Text"})]}),"file"===h?(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select data file to encode:"}),(0,s.jsx)("input",{type:"file",accept:"*",onChange:e=>e.target.files&&o(e.target.files[0]),className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Accepts any file type (.zst, .bin, .txt, etc.)"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Enter text to encode:"}),(0,s.jsx)("textarea",{className:"w-full p-2 rounded border border-gray-500 bg-black text-white",rows:5,value:x,onChange:e=>m(e.target.value),placeholder:"Type your secret message here..."}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Your message will be encoded as a UTF-8 text file."})]}),"file"===h&&d&&(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Data file: ",d.name]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Size: ",(d.size/1024/1024).toFixed(2)," MB"]}),p&&d.size>v&&(0,s.jsxs)("p",{className:"text-sm text-orange-400 mt-2",children:["⚠️ Data exceeds image capacity.",N?" Canvas will be expanded automatically.":" Please use a larger image or increase bits/channel."]})]}),"text"===h&&x&&(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Text length: ",x.length," characters"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["UTF-8 size: ",(new Blob([x]).size/1024).toFixed(2)," KB"]}),p&&new Blob([x]).size>v&&(0,s.jsxs)("p",{className:"text-sm text-orange-400 mt-2",children:["⚠️ Text exceeds image capacity.",N?" Canvas will be expanded automatically.":" Please use a larger image or increase bits/channel."]})]}),(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Encoding Settings"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Bits per channel: ",y]}),(0,s.jsx)("input",{type:"range",min:"1",max:S?4:8,value:y,onChange:e=>j(Number(e.target.value)),className:"w-full"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:S?"Limited to 4 bits for better quality preservation":"Higher values store more data but may be more noticeable"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"preserveQuality",checked:S,onChange:e=>{k(e.target.checked),e.target.checked&&y>4&&j(4)},className:"rounded"}),(0,s.jsx)("label",{htmlFor:"preserveQuality",className:"text-sm",children:"Preserve visual quality (recommended)"})]}),!p&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoExpand",checked:N,onChange:e=>C(e.target.checked),className:"rounded"}),(0,s.jsx)("label",{htmlFor:"autoExpand",className:"text-sm",children:"Auto-expand canvas to fit data"})]})]}),("file"===h?d:x)&&(0,s.jsx)("button",{onClick:async()=>{let e;f(!0);let t=d;if("text"===h&&(t=new File([x],"message.txt",{type:"text/plain"})),!t)return f(!1);let s=URL.createObjectURL(t);p&&(e=URL.createObjectURL(p));let r=new Worker(a.tu(new URL(a.p+a.u(444),a.b)),{type:void 0});F.current=r,r.onmessage=e=>{let{data:t}=e;void 0!==t.pct&&l(t.pct),t.done&&(c(URL.createObjectURL(t.png)),l(1),f(!1)),t.error&&(alert(t.error),f(!1))},r.postMessage({type:"encode",dataURL:s,imageURL:e,bits:y,autoExpand:N,maxCanvas:L})},disabled:u,className:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 disabled:bg-gray-400",children:u?"Processing...":"Generate Stego PNG"}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress",style:{width:"".concat(100*n,"%")}})}),(0,s.jsxs)("p",{children:[(100*n).toFixed(1),"%"]})]})]}),"decode"===e&&!i&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select PNG file to decode:"}),(0,s.jsx)("input",{type:"file",accept:"image/png",onChange:e=>e.target.files&&_(e.target.files[0]),className:"w-full"})]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress",style:{width:"".concat(100*n,"%")}})}),(0,s.jsxs)("p",{children:[(100*n).toFixed(1),"%"]})]})]}),i&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("a",{href:i,download:"stego.png",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700",children:"Download PNG"}),(0,s.jsx)("button",{onClick:()=>D(!O),disabled:E,className:"ml-4 bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 disabled:bg-gray-400",children:E?"Sharing...":P?"✓ Shared!":"Share to Feed"}),(0,s.jsx)("button",{onClick:I,className:"ml-4 bg-gray-600 text-white px-6 py-3 rounded hover:bg-gray-700",children:"Start Over"}),O&&!P&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-800/20 rounded border border-gray-500/30",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3 text-white",children:"Share to Feed"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Description (optional):"}),(0,s.jsx)("textarea",{value:B,onChange:e=>G(e.target.value),placeholder:"Add a description for your encoded image...",className:"w-full p-2 rounded border border-gray-500 bg-black text-white",rows:3}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty to use default description"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:H,disabled:E,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:bg-gray-400",children:E?"Sharing...":"Post to Feed"}),(0,s.jsx)("button",{onClick:()=>{D(!1),G("")},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancel"})]})]}),P&&(0,s.jsxs)("div",{className:"mt-4 text-green-400",children:["✓ Successfully shared to feed! ",(0,s.jsx)("a",{href:"https://www.incrypt.net/feed.html",className:"underline hover:text-green-300",children:"View Feed"})]}),U&&(0,s.jsxs)("div",{className:"mt-8 mx-auto max-w-xl bg-gray-900 text-green-300 p-4 rounded border border-green-600 text-left whitespace-pre-wrap break-words",children:[(0,s.jsx)("h3",{className:"font-bold mb-2 text-green-200",children:"Decoded Text Message:"}),(0,s.jsx)("div",{style:{fontFamily:"monospace"},children:U})]})]})]}),(0,s.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n          const matrixCanvas = document.getElementById('matrixCanvas');\n          const matrixCtx = matrixCanvas.getContext('2d');\n          matrixCanvas.width = window.innerWidth;\n          matrixCanvas.height = window.innerHeight;\n          const fontSize = 16;\n          const columns = Math.floor(matrixCanvas.width / fontSize);\n          const drops = Array(columns).fill(1);\n          const characters = 'アカサタナハマヤラワガザダバパABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'.split('');\n          let frameCounter = 0;\n          const updateRate = 4;\n          function drawMatrix() {\n            if (frameCounter % updateRate !== 0) {\n              requestAnimationFrame(drawMatrix);\n              frameCounter++;\n              return;\n            }\n            matrixCtx.fillStyle = \"rgba(0, 0, 0, 0.05)\";\n            matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);\n            matrixCtx.font = `${fontSize}px monospace`;\n            for (let i = 0; i < columns; i++) {\n              const char = characters[Math.floor(Math.random() * characters.length)];\n              const flicker = Math.random() < 0.003;\n              if (flicker) {\n                matrixCtx.fillStyle = 'rgba(255, 255, 255, 0.4)';\n                matrixCtx.shadowBlur = 4;\n                matrixCtx.shadowColor = '#ffffff';\n              } else {\n                matrixCtx.fillStyle = 'rgba(200, 200, 200, 0.15)';\n                matrixCtx.shadowBlur = 0;\n              }\n              matrixCtx.fillText(char, i * fontSize, drops[i] * fontSize);\n              if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) {\n                drops[i] = 0;\n              }\n              drops[i]++;\n            }\n            frameCounter++;\n            requestAnimationFrame(drawMatrix);\n          }\n          drawMatrix();\n          window.addEventListener('resize', () => {\n            matrixCanvas.width = window.innerWidth;\n            matrixCanvas.height = window.innerHeight;\n          });\n        "}})]})}},7587:(e,t,a)=>{Promise.resolve().then(a.bind(a,1370))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7587)),_N_E=e.O()}]);