(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1370:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),r=a(2115);function l(){let[e,t]=(0,r.useState)("encode"),[l,n]=(0,r.useState)(0),[c,i]=(0,r.useState)(),[d,o]=(0,r.useState)(),[x,m]=(0,r.useState)(""),[g,h]=(0,r.useState)("file"),[b,p]=(0,r.useState)(),[u,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)(5),[N,v]=(0,r.useState)(0),[w,S]=(0,r.useState)(!0),[k,C]=(0,r.useState)(!0),R=(0,r.useRef)(null),[L,F]=(0,r.useState)(25e3),[U,P]=(0,r.useState)(""),[T,E]=(0,r.useState)(!1),[O,D]=(0,r.useState)(!1),[z,G]=(0,r.useState)(!1),[B,M]=(0,r.useState)("");(0,r.useEffect)(()=>{F(function(){let e=document.createElement("canvas").getContext("2d"),t=4096;try{for(;t<=32768;)e.canvas.width=e.canvas.height=t,e.getImageData(0,0,1,1),t+=1024}catch(e){}return t-1024}())},[]),(0,r.useEffect)(()=>{if(b){let e=new Image;return e.onload=()=>{v(_(e.width,e.height,f))},e.src=URL.createObjectURL(b),()=>URL.revokeObjectURL(e.src)}v(0)},[b,f]);let _=(e,t,a)=>e*t*3*a>>3,I=e=>{y(!0),n(0),P("");let t=URL.createObjectURL(e),s=new Worker(a.tu(new URL(a.p+a.u(364),a.b)),{type:void 0});s.onmessage=async e=>{let{data:t}=e;if(void 0!==t.pct&&n(t.pct),t.done){var a;i(URL.createObjectURL(t.blob)),n(1),y(!1),window.decodeResult={suggestedName:t.suggestedName,fileSize:t.fileSize,detectedType:t.detectedType},t.blob&&((null==(a=t.detectedType)?void 0:a.toLowerCase().includes("text"))||"text/plain"===t.blob.type)&&P(await t.blob.text())}t.error&&(alert(t.error),y(!1))},s.postMessage({type:"decode",imageURL:t,bits:f,maxCanvas:L})},A=()=>{c&&URL.revokeObjectURL(c),i(void 0),n(0),o(void 0),m(""),p(void 0),D(!1),G(!1),M("")},W=async()=>{if(c){E(!0);try{let e=await fetch(c),t=await e.blob(),a=new FileReader;a.onload=async()=>{let e=a.result,t=B.trim()||"Encoded steganography image created with Incrypt - ".concat("text"===g?"Text message":"File data"," encoded with ").concat(f," bits per channel"),s=await fetch("https://www.incrypt.net/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e,description:t})});if(s.ok){let e=await s.json();console.log("Posted successfully:",e),D(!0),G(!1)}else throw Error("Failed to post to feed")},a.readAsDataURL(t)}catch(e){console.error("Error posting:",e),alert("Failed to share to feed. Please try again.")}finally{E(!1)}}};return(0,s.jsxs)("main",{className:"container main-content encoder-highlight",style:{marginTop:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"70vh",background:"rgba(20, 20, 20, 0.85)",borderRadius:"24px",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",padding:"2.5rem 2rem",maxWidth:"600px",marginLeft:"auto",marginRight:"auto",border:"1.5px solid rgba(255,255,255,0.08)"},children:[(0,s.jsx)("h1",{style:{fontSize:"2.2rem",fontWeight:700,marginBottom:"1.5rem",color:"#fff",letterSpacing:"0.02em",textShadow:"0 2px 16px rgba(0,0,0,0.4)"},children:"GPT‑1 Stego PNG Maker"}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center mb-6",children:[(0,s.jsx)("button",{onClick:()=>{t("encode"),A()},className:"px-4 py-2 rounded ".concat("encode"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Encode Data → PNG"}),(0,s.jsx)("button",{onClick:()=>{t("decode"),A()},className:"px-4 py-2 rounded ".concat("decode"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Decode PNG → Data"})]}),"encode"===e&&!c&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select cover image (optional):"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>e.target.files&&p(e.target.files[0]),className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"If no image provided, random pointillist art will be generated"})]}),b&&(0,s.jsxs)("div",{className:"bg-purple-900/20 p-4 rounded border border-purple-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Cover image: ",b.name]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Capacity: ",(N/1024/1024).toFixed(2)," MB with ",f," bits/channel"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,s.jsx)("button",{type:"button",className:"px-3 py-1 rounded ".concat("file"===g?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>h("file"),children:"File"}),(0,s.jsx)("button",{type:"button",className:"px-3 py-1 rounded ".concat("text"===g?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>h("text"),children:"Text"})]}),"file"===g?(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select data file to encode:"}),(0,s.jsx)("input",{type:"file",accept:"*",onChange:e=>e.target.files&&o(e.target.files[0]),className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Accepts any file type (.zst, .bin, .txt, etc.)"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Enter text to encode:"}),(0,s.jsx)("textarea",{className:"w-full p-2 rounded border border-gray-500 bg-black text-white",rows:5,value:x,onChange:e=>m(e.target.value),placeholder:"Type your secret message here..."}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Your message will be encoded as a UTF-8 text file."})]}),"file"===g&&d&&(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Data file: ",d.name]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Size: ",(d.size/1024/1024).toFixed(2)," MB"]}),b&&d.size>N&&(0,s.jsxs)("p",{className:"text-sm text-orange-400 mt-2",children:["⚠️ Data exceeds image capacity.",w?" Canvas will be expanded automatically.":" Please use a larger image or increase bits/channel."]})]}),"text"===g&&x&&(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsxs)("p",{className:"text-sm",children:["Text length: ",x.length," characters"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["UTF-8 size: ",(new Blob([x]).size/1024).toFixed(2)," KB"]}),b&&new Blob([x]).size>N&&(0,s.jsxs)("p",{className:"text-sm text-orange-400 mt-2",children:["⚠️ Text exceeds image capacity.",w?" Canvas will be expanded automatically.":" Please use a larger image or increase bits/channel."]})]}),(0,s.jsxs)("div",{className:"bg-gray-800/20 p-4 rounded border border-gray-500/30",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"Encoding Settings"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Bits per channel: ",f]}),(0,s.jsx)("input",{type:"range",min:"1",max:k?4:8,value:f,onChange:e=>j(Number(e.target.value)),className:"w-full"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:k?"Limited to 4 bits for better quality preservation":"Higher values store more data but may be more noticeable"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"preserveQuality",checked:k,onChange:e=>{C(e.target.checked),e.target.checked&&f>4&&j(4)},className:"rounded"}),(0,s.jsx)("label",{htmlFor:"preserveQuality",className:"text-sm",children:"Preserve visual quality (recommended)"})]}),!b&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoExpand",checked:w,onChange:e=>S(e.target.checked),className:"rounded"}),(0,s.jsx)("label",{htmlFor:"autoExpand",className:"text-sm",children:"Auto-expand canvas to fit data"})]})]}),("file"===g?d:x)&&(0,s.jsx)("button",{onClick:async()=>{let e;y(!0);let t=d;if("text"===g&&(t=new File([x],"message.txt",{type:"text/plain"})),!t)return y(!1);let s=URL.createObjectURL(t);b&&(e=URL.createObjectURL(b));let r=new Worker(a.tu(new URL(a.p+a.u(444),a.b)),{type:void 0});R.current=r,r.onmessage=e=>{let{data:t}=e;void 0!==t.pct&&n(t.pct),t.done&&(i(URL.createObjectURL(t.png)),n(1),y(!1)),t.error&&(alert(t.error),y(!1))},r.postMessage({type:"encode",dataURL:s,imageURL:e,bits:f,autoExpand:w,maxCanvas:L})},disabled:u,className:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 disabled:bg-gray-400",children:u?"Processing...":"Generate Stego PNG"}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress",style:{width:"".concat(100*l,"%")}})}),(0,s.jsxs)("p",{children:[(100*l).toFixed(1),"%"]})]})]}),"decode"===e&&!c&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Select PNG file to decode:"}),(0,s.jsx)("input",{type:"file",accept:"image/png",onChange:e=>e.target.files&&I(e.target.files[0]),className:"w-full"})]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"progress-bar",children:(0,s.jsx)("div",{className:"progress",style:{width:"".concat(100*l,"%")}})}),(0,s.jsxs)("p",{children:[(100*l).toFixed(1),"%"]})]})]}),c&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("a",{href:c,download:"stego.png",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700",children:"Download PNG"}),(0,s.jsx)("button",{onClick:()=>G(!z),disabled:T,className:"ml-4 bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 disabled:bg-gray-400",children:T?"Sharing...":O?"✓ Shared!":"Share to Feed"}),(0,s.jsx)("button",{onClick:A,className:"ml-4 bg-gray-600 text-white px-6 py-3 rounded hover:bg-gray-700",children:"Start Over"}),z&&!O&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-800/20 rounded border border-gray-500/30",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3 text-white",children:"Share to Feed"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Description (optional):"}),(0,s.jsx)("textarea",{value:B,onChange:e=>M(e.target.value),placeholder:"Add a description for your encoded image...",className:"w-full p-2 rounded border border-gray-500 bg-black text-white",rows:3}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty to use default description"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:W,disabled:T,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:bg-gray-400",children:T?"Sharing...":"Post to Feed"}),(0,s.jsx)("button",{onClick:()=>{G(!1),M("")},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancel"})]})]}),O&&(0,s.jsxs)("div",{className:"mt-4 text-green-400",children:["✓ Successfully shared to feed! ",(0,s.jsx)("a",{href:"https://www.incrypt.net/feed.html",className:"underline hover:text-green-300",children:"View Feed"})]}),U&&(0,s.jsxs)("div",{className:"mt-8 mx-auto max-w-xl bg-gray-900 text-green-300 p-4 rounded border border-green-600 text-left whitespace-pre-wrap break-words",children:[(0,s.jsx)("h3",{className:"font-bold mb-2 text-green-200",children:"Decoded Text Message:"}),(0,s.jsx)("div",{style:{fontFamily:"monospace"},children:U})]})]})]})}},7587:(e,t,a)=>{Promise.resolve().then(a.bind(a,1370))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7587)),_N_E=e.O()}]);